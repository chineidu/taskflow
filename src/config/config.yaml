config:
  rabbitmq_config:
    max_retries: 3
    retry_delay: 1
    connection_timeout: 5
    heartbeat: 60
    prefetch_count: 5
    queue_names:
      task_queue: task_queue
      result_queue: result_queue
    topic_names:
      progress_topic: progress_topic
    queue_priority: high
    dlq_config:
      dlq_name: task_queue_dlq
      dlx_name: task_queue_dlx
      ttl: 30000 # 30 seconds
    message_retries: 3
    retry_backoff_delay: 2
    tasks_timeout: 300 # 5 minutes
    circuit_breaker_config:
      # failure_threshold > message_retries to ensure circuit breaker activates
      # after more retry attempts than individual messages allow
      failure_threshold: 5
      recovery_timeout: 60

  api_config:
    title: TaskFlow API
    name: "${.title}"
    description: A Learning-Focused Task Queue System API
    version: v1.0.0
    status: healthy
    prefix: /api/v1
    auth_prefix: "${.prefix}/auth"
    middleware:
      cors:
        allow_origins:
          - "*"
        allow_credentials: true
        allow_methods:
          - "*"
        allow_headers:
          - "*"
    ratelimit:
      default_rate: 50
      burst_rate: 100
      login_rate: 10

  database_config:
    pool_size: 30
    max_overflow: 10 # Allow N extra connections
    pool_timeout: 20 # Wait N seconds for connection
    pool_recycle: 1800 # Recycle connections after 30 minutes
    pool_pre_ping: true # Test connections before use
    echo: false
    expire_on_commit: false # False for async implementations
